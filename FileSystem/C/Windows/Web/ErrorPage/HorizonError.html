<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connection Error</title>
    <style>
        :root {
            --bg-color: #0f1014;
            --card-bg: #181a20;
            --text-main: #e2e8f0;
            --text-muted: #94a3b8;
            --accent: #6366f1; /* Horizon Blue/Purple */
            --accent-hover: #4f46e5;
            --error: #ef4444;
            --border: #2d3139;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        /* Background Grid Animation */
        .bg-grid {
            position: absolute;
            width: 200%;
            height: 200%;
            background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            transform: perspective(500px) rotateX(60deg) translateY(-100px) translateZ(-200px);
            animation: grid-move 20s linear infinite;
            z-index: -1;
            pointer-events: none;
        }

        @keyframes grid-move {
            0% {
                transform: perspective(500px) rotateX(60deg) translateY(0) translateZ(-200px);
            }
            100% {
                transform: perspective(500px) rotateX(60deg) translateY(40px) translateZ(-200px);
            }
        }

        .container {
            background: var(--card-bg);
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--border);
            max-width: 480px;
            width: 90%;
            text-align: center;
            animation: pop-in 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;

            background: linear-gradient(90deg,
            var(--accent) 0%,
            #a855f7 25%,
            #ffffff 50%,
            #a855f7 75%,
            var(--accent) 100%
            );

            background-size: 200% auto;

            animation: horizon-flow 3s linear infinite;

            box-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
        }

        @keyframes horizon-flow {
            0% {
                background-position: 200% 0;
            }
            100% {
                background-position: 0% 0;
            }
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 24px;
            color: var(--text-main);
            font-weight: 600;
            font-size: 1.2rem;
            letter-spacing: 1px;
        }

        .logo svg {
            width: 24px;
            height: 24px;
            margin-right: 10px;
            fill: var(--accent);
        }

        .icon-large {
            margin-bottom: 20px;
        }

        .icon-large svg {
            width: 80px;
            height: 80px;
            fill: var(--text-muted);
            opacity: 0.5;
        }

        h1 {
            margin: 0 0 10px 0;
            font-size: 1.8rem;
            font-weight: 700;
        }

        p {
            color: var(--text-muted);
            line-height: 1.6;
            margin-bottom: 24px;
        }

        .details-box {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            text-align: left;
            margin-bottom: 24px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85rem;
        }

        .details-box .label {
            color: var(--error);
            font-weight: bold;
            display: block;
            margin-bottom: 4px;
        }

        .checklist {
            text-align: left;
            margin-bottom: 30px;
            color: var(--text-muted);
            font-size: 0.9rem;
            padding-left: 10px;
        }

        .checklist li {
            margin-bottom: 8px;
            list-style-type: none;
            position: relative;
            padding-left: 20px;
        }

        .checklist li::before {
            content: '•';
            color: var(--accent);
            position: absolute;
            left: 0;
            font-weight: bold;
        }

        .terminal-window {
            background: #000;
            border: 1px solid #333;
            border-radius: 4px;
            margin-bottom: 24px;
            width: 100%;
            font-family: 'Consolas', 'Courier New', monospace;
            font-size: 0.75rem;
            text-align: left;
            overflow: hidden;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.8);
        }

        .terminal-header {
            background: #333;
            color: #ccc;
            padding: 2px 8px;
            font-size: 0.7rem;
            border-bottom: 1px solid #444;
        }

        .terminal-content {
            padding: 8px;
            height: 80px;
            color: #4ade80;
            display: block;

            overflow-y: auto;
            scrollbar-width: none;

            font-family: 'Consolas', 'Courier New', monospace;
            line-height: 1.4;
            position: relative;
        }

        .terminal-content::-webkit-scrollbar {
            display: none;
        }

        .cursor {
            display: inline-block;
            width: 8px;
            height: 14px;
            background: #4ade80;
            animation: blink 1s step-end infinite;
            vertical-align: text-bottom; /* Вирівнюємо по низу тексту */
            margin-left: 2px; /* Відступ, щоб не лип до букв */
        }

        @keyframes blink {
            50% {
                opacity: 0;
            }
        }

        button {
            padding: 12px 32px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1rem;
            transition: all 0.2s ease;
            box-shadow: 0 4px 6px -1px rgba(99, 102, 241, 0.3);
        }

        button:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        @keyframes pop-in {
            0% {
                opacity: 0;
                transform: scale(0.95);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .footer {
            margin-top: 30px;
            font-size: 0.75rem;
            color: #475569;
        }

    </style>
</head>
<body>

<div class="bg-grid"></div>

<div class="container">
    <div class="logo">
        <svg viewBox="0 0 24 24">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/>
        </svg>
        HORIZON
    </div>

    <div class="icon-large">
        <svg viewBox="0 0 24 24">
            <path d="M23.64 7c-.45-.34-4.93-4-11.64-4-1.5 0-2.89.19-4.15.48L18.18 13.8 23.64 7zm-6.6 8.22L3.27 1.44 2 2.72l2.05 2.06C1.91 5.76.59 6.82.36 7l11.63 14.49.01.01.01-.01 3.9-4.86 3.32 3.32 1.27-1.27-3.46-3.46z"/>
        </svg>
    </div>

    <h1>Connection Failed</h1>
    <p id="flavor-text" style="min-height: 1.6em; transition: opacity 0.5s;">
        Horizon is confused...
    </p>

    <div class="details-box">
        <span class="label">ERROR_CONNECTION_REFUSED</span>
        <span style="color: #94a3b8;">Diagnostic:</span> {reason}<br>
        <span style="color: #94a3b8;">Timestamp:</span> <span id="time"></span>
    </div>

    <ul class="checklist">
        <li>Check your network connection in OS settings.</li>
        <li>Verify that the firewall is not blocking access.</li>
        <li>The remote server might be offline.</li>
    </ul>

    <div class="terminal-window">
        <div class="terminal-header">NETWORK DIAGNOSTIC TOOL v1.0</div>
        <div id="terminal-content" class="terminal-content">
            <div>> Initializing connection protocol...</div>
            <span id="terminal-cursor" class="cursor"></span>
        </div>
    </div>

    <button onclick="location.reload()">Try Again</button>
</div>

<div class="footer">
    Horizon Browser Kernel v2.4 • HentOS
</div>

<script>
    const now = new Date();
    document.getElementById('time').innerText = now.toLocaleTimeString('uk-UA', {
        hour12: false,
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
    });
    const phrases = [
        "Horizon tried its best, but the server said 'no'.",
        "It's not you, it's the network firewall.",
        "The packets got lost in the void. Sending a search party...",
        "Horizon tripped over a virtual cable.",
        "404: Motivation to connect not found.",
        "Have you tried turning the internet off and on again?",
        "The hamsters running the server are currently on break.",
        "Signal lost in deep space. Waiting for alien response...",
        "Horizon is looking for the page... still looking...",
        "Connection refused by the laws of physics.",
        "We knocked on the server door, but nobody answered.",
        "This is awkward. The internet is gone.",
        "Horizon.sapp has stopped caring (just kidding, network error)."
    ];

    const randomPhrase = phrases[Math.floor(Math.random() * phrases.length)];

    const textElement = document.getElementById('flavor-text');
    textElement.style.opacity = 0;

    setTimeout(() => {
        textElement.innerText = randomPhrase;
        textElement.style.opacity = 1;
    }, 100);

    const terminal = document.getElementById('terminal-content');
    const cursor = document.getElementById('terminal-cursor'); // Знаходимо курсор

    const logs = [
        "Resolving host name...",
        "Error: DNS probe finished with NXDOMAIN",
        "Pinging 8.8.8.8... Request timed out.",
        "Checking proxy settings... [OK]",
        "Flushing DNS cache... [DONE]",
        "Attempting handshake with gateway...",
        "Connection refused by remote host (Port 80)",
        "Packet loss: 100%",
        "Retrying connection protocol (Attempt 2)...",
        "Error: Network unreachable.",
        "System halted. User intervention required."
    ];

    let logIndex = 0;

    function addLog() {
        if (logIndex >= logs.length) return;

        const line = document.createElement('div');
        line.innerText = `> ${logs[logIndex]}`;

        terminal.insertBefore(line, cursor);

        logIndex++;

        // ОНОВЛЕНИЙ СКРОЛ: Чекаємо мікро-момент, поки браузер опрацює CSS
        requestAnimationFrame(() => {
            terminal.scrollTop = terminal.scrollHeight;
        });

        const nextTime = Math.random() * 800 + 200;
        setTimeout(addLog, nextTime);
    }

    setTimeout(addLog, 1000);
</script>
</body>
</html>